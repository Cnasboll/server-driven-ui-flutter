# HeroDex 3000 - Hero Detail Screen
screen:
  type: Scaffold
  props:
    appBar:
      type: AppBar
      props:
        leading:
          type: IconButton
          props:
            icon: "arrow_back"
            onPressed: "shql: Nav.GO_BACK()"
        title:
          type: Observer
          props:
            query: "Heroes.selected_hero"
            builder:
              type: Text
              props:
                data: "shql: IF Heroes.selected_hero <> null THEN Heroes.selected_hero.name ELSE 'Hero Details'"
                style:
                  fontFamily: "Orbitron"
        actions:
          # Edit button (only for saved heroes)
          - type: Observer
            props:
              query: "Heroes.selected_hero"
              builder:
                type: "shql: IF Heroes.selected_hero <> null AND Heroes.heroes[Heroes.selected_hero.ID] <> null THEN 'IconButton' ELSE 'SizedBox'"
                props:
                  icon: "edit"
                  onPressed: "shql: HeroEdit.EDIT_HERO()"
                  width: 0
                  height: 0
          # Lock toggle button (only for saved heroes)
          - type: Observer
            props:
              query: "Heroes.selected_hero"
              builder:
                type: "shql: IF Heroes.selected_hero <> null AND Heroes.heroes[Heroes.selected_hero.ID] <> null THEN 'IconButton' ELSE 'SizedBox'"
                props:
                  icon: "shql: IF Heroes.selected_hero <> null AND Heroes.selected_hero.locked THEN 'lock' ELSE 'lock_open'"
                  onPressed: "shql: _TOGGLE_LOCK_HERO(Heroes.selected_hero.id)"
                  width: 0
                  height: 0
          # Delete button (only for saved heroes)
          - type: Observer
            props:
              query: "Heroes.selected_hero"
              builder:
                type: "shql: IF Heroes.selected_hero <> null AND Heroes.heroes[Heroes.selected_hero.ID] <> null THEN 'IconButton' ELSE 'SizedBox'"
                props:
                  icon: "delete"
                  onPressed: "shql: DELETE_HERO(Heroes.selected_hero.id); Nav.GO_BACK()"
                  width: 0
                  height: 0

    # Body: data-driven from _detail_fields metadata (generated by HeroSchema)
    body:
      type: Observer
      props:
        query: "Heroes.selected_hero"
        builder: "shql: Detail.GENERATE_HERO_DETAIL()"

    bottomNavigationBar:
      type: BottomNav
      props:
        currentIndex: 0
        onTap: "Nav.TAB_NAV(-1, value)"
