# HeroDex 3000 - Hero Detail Screen
screen:
  type: Scaffold
  props:
    appBar:
      type: AppBar
      props:
        leading:
          type: IconButton
          props:
            icon: "arrow_back"
            onPressed: "GO_BACK()"
        title:
          type: Observer
          props:
            query: "_selected_hero"
            builder:
              type: Text
              props:
                data: "shql: IF _selected_hero <> null THEN _selected_hero.name ELSE 'Hero Details'"
                style:
                  fontFamily: "Orbitron"
        actions:
          # Edit button (only for saved heroes)
          - type: Observer
            props:
              query: "_selected_hero"
              builder:
                type: "shql: IF _selected_hero <> null AND _selected_hero.saved_at <> null THEN 'IconButton' ELSE 'SizedBox'"
                props:
                  icon: "edit"
                  onPressed: "EDIT_HERO()"
                  width: 0
                  height: 0
          # Lock toggle button (only for saved heroes)
          - type: Observer
            props:
              query: "_selected_hero"
              builder:
                type: "shql: IF _selected_hero <> null AND _selected_hero.saved_at <> null THEN 'IconButton' ELSE 'SizedBox'"
                props:
                  icon: "shql: IF _selected_hero <> null AND _selected_hero.locked THEN 'lock' ELSE 'lock_open'"
                  onPressed: "_TOGGLE_LOCK_HERO(_selected_hero.id)"
                  width: 0
                  height: 0
          # Delete button (only for saved heroes)
          - type: Observer
            props:
              query: "_selected_hero"
              builder:
                type: "shql: IF _selected_hero <> null AND _selected_hero.saved_at <> null THEN 'IconButton' ELSE 'SizedBox'"
                props:
                  icon: "delete"
                  onPressed: "DELETE_HERO(_selected_hero.id); GO_BACK()"
                  width: 0
                  height: 0

    # Body: data-driven from _detail_fields metadata (generated by HeroSchema)
    body:
      type: Observer
      props:
        query: "_selected_hero"
        builder: "shql: GENERATE_HERO_DETAIL()"

    bottomNavigationBar:
      type: BottomNav
      props:
        currentIndex: 0
        onTap: "TAB_NAV(-1, value)"
