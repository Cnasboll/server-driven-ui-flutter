# HeroDex 3000 - Settings Screen
screen:
  type: Scaffold
  props:
    appBar:
      type: AppBar
      props:
        title:
          type: Text
          props:
            data: "Settings"
            style:
              fontFamily: "Orbitron"

    body:
      type: SingleChildScrollView
      props:
        child:
          type: Column
          props:
            crossAxisAlignment: "stretch"
            children:
              # Theme Section
              - type: SectionHeader
                props:
                  title: "Appearance"
                  color: "0xFF1976D2"

              - type: ListTile
                props:
                  leading:
                    type: Icon
                    props:
                      icon: "shql: IF Prefs.is_dark_mode THEN 'dark_mode' ELSE 'light_mode'"
                  title:
                    type: Text
                    props:
                      data: "Dark Mode"
                  trailing:
                    type: Observer
                    props:
                      query: "Prefs.is_dark_mode"
                      builder:
                        type: Switch
                        props:
                          value: "shql: Prefs.is_dark_mode"
                          onChanged: "shql: Prefs.SET_DARK_MODE(value)"

              - type: Divider

              # API Configuration Section
              - type: SectionHeader
                props:
                  title: "API Configuration"
                  color: "0xFF1976D2"

              - type: ApiField
                props:
                  label: "Superhero API Key"
                  query: "Prefs.api_key"
                  initialValue: "shql: Prefs.api_key"
                  hintText: "Enter your superheroapi.com API key"
                  onChanged: "Prefs.SET_API_KEY(value)"
                  onSubmitted: "Prefs.SET_API_KEY(value)"

              - type: Padding
                props:
                  padding:
                    left: 16
                    right: 16
                    bottom: 8
                  child:
                    type: Text
                    props:
                      data: "Get a free key at superheroapi.com"
                      style:
                        fontSize: 12
                        color: "0xFF757575"

              - type: ApiField
                props:
                  label: "API Host"
                  query: "Prefs.api_host"
                  initialValue: "shql: Prefs.api_host"
                  hintText: "www.superheroapi.com"
                  onChanged: "Prefs.SET_API_HOST(value)"
                  onSubmitted: "Prefs.SET_API_HOST(value)"

              - type: Divider

              # Privacy Section
              - type: SectionHeader
                props:
                  title: "Privacy & Consent"
                  color: "0xFF1976D2"

              - type: ConsentToggle
                props:
                  icon: "analytics"
                  title: "Analytics"
                  subtitle: "Help improve HeroDex with usage data"
                  query: "Prefs.analytics_enabled"
                  valueExpr: "shql: Prefs.analytics_enabled"
                  onChanged: "Prefs.SET_ANALYTICS_CONSENT(value)"

              - type: ConsentToggle
                props:
                  icon: "bug_report"
                  title: "Crash Reports"
                  subtitle: "Automatically send crash reports"
                  query: "Prefs.crashlytics_enabled"
                  valueExpr: "shql: Prefs.crashlytics_enabled"
                  onChanged: "Prefs.SET_CRASHLYTICS_CONSENT(value)"

              - type: ConsentToggle
                props:
                  icon: "location_on"
                  title: "Location Access"
                  subtitle: "Use your real GPS location"
                  query: "Prefs.location_enabled"
                  valueExpr: "shql: Prefs.location_enabled"
                  onChanged: "Prefs.SET_LOCATION_CONSENT(value)"

              - type: Observer
                props:
                  query: "World.location_description"
                  builder:
                    type: Padding
                    props:
                      padding:
                        left: 56
                        right: 16
                        bottom: 8
                      child:
                        type: Text
                        props:
                          data: "shql: IF LENGTH(World.location_description) > 0 THEN 'Your location: ' + World.location_description ELSE ''"
                          style:
                            fontSize: 12
                            color: "0xFF757575"

              - type: Divider

              # Named Filter Predicates Section
              - type: SectionHeader
                props:
                  title: "Filter Predicates"
                  color: "0xFF1976D2"

              - type: Padding
                props:
                  padding:
                    left: 16
                    right: 16
                    bottom: 8
                  child:
                    type: Text
                    props:
                      data: "User-defined SHQLâ„¢ predicates for classifying characters. Select a filter to edit, or add new ones."
                      style:
                        fontSize: 12
                        color: "0xFF757575"

              - type: FilterEditor
                props:
                  mode: "manage"

              - type: Divider

              # About Section
              - type: SectionHeader
                props:
                  title: "About"
                  color: "0xFF1976D2"

              - type: ListTile
                props:
                  leading:
                    type: Icon
                    props:
                      icon: "info"
                  title:
                    type: Text
                    props:
                      data: "HeroDex 3000"
                  subtitle:
                    type: Text
                    props:
                      data: "Version 1.0.0"

              - type: ListTile
                props:
                  leading:
                    type: Icon
                    props:
                      icon: "code"
                  title:
                    type: Text
                    props:
                      data: "Created by"
                  subtitle:
                    type: Text
                    props:
                      data: "Ikra Fintech Solutions AB"

              - type: ListTile
                props:
                  leading:
                    type: Icon
                    props:
                      icon: "calendar_today"
                  title:
                    type: Text
                    props:
                      data: "Year"
                  subtitle:
                    type: Text
                    props:
                      data: "2026"

              - type: Divider

              # Danger Zone
              - type: SectionHeader
                props:
                  title: "Danger Zone"
                  color: "0xFFF44336"

              - type: ListTile
                props:
                  leading:
                    type: Icon
                    props:
                      icon: "delete_forever"
                      color: "0xFFF44336"
                  title:
                    type: Text
                    props:
                      data: "Clear All Data"
                      style:
                        color: "0xFFF44336"
                  subtitle:
                    type: Text
                    props:
                      data: "Remove all saved heroes"
                  onTap: "shql: Heroes.CLEAR_ALL_DATA()"

              - type: ListTile
                props:
                  leading:
                    type: Icon
                    props:
                      icon: "info"
                      color: "0xFFFF9800"
                  title:
                    type: Text
                    props:
                      data: "Show Onboarding"
                      style:
                        color: "0xFFFF9800"
                  subtitle:
                    type: Text
                    props:
                      data: "Reset and show welcome screen"
                  onTap: "shql: Prefs.RESET_ONBOARDING()"

              - type: ListTile
                props:
                  leading:
                    type: Icon
                    props:
                      icon: "logout"
                      color: "0xFFF44336"
                  title:
                    type: Text
                    props:
                      data: "Sign Out"
                      style:
                        color: "0xFFF44336"
                  subtitle:
                    type: Text
                    props:
                      data: "Log out of your account"
                  onTap: "shql: Heroes.SIGN_OUT()"

    bottomNavigationBar:
      type: BottomNav
      props:
        currentIndex: 3
        onTap: "Nav.TAB_NAV(3, value)"
